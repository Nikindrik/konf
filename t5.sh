#!/bin/bash

# Проверяем, передан ли аргумент с именем команды
if [ -z "$1" ]; then
    echo "Использование: $0 <имя_файла>"
    exit 1
fi

# Переменная с именем команды
COMMAND=$1

# Проверяем, существует ли файл
if [ ! -f "$COMMAND" ]; then
    echo "Ошибка: файл '$COMMAND' не существует."
    exit 1
fi

# Копируем файл в /usr/local/bin
# Для этого нужны права суперпользователя
sudo cp "$COMMAND" /usr/local/bin/

# Проверяем, успешно ли было выполнено копирование
if [ $? -ne 0 ]; then
    echo "Ошибка: не удалось скопировать файл в /usr/local/bin."
    exit 1
fi

# Устанавливаем правильные права доступа
# 755 означает: владелец может читать, писать и выполнять, 
# остальные пользователи могут только читать и выполнять
sudo chmod 755 /usr/local/bin/"$COMMAND"

# Проверяем успешность изменения прав
if [ $? -ne 0 ]; then
    echo "Ошибка: не удалось изменить права доступа."
    exit 1
fi

# Сообщаем об успешной регистрации команды
echo "Команда '$COMMAND' успешно зарегистрирована и скопирована в /usr/local/bin."
