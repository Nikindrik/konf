#!/bin/bash

# Скрипт для нахождения файлов-дубликатов по заданному пути и в подкаталогах.
# Используется MD5-хеш для сравнения файлов по содержимому.

# Проверяем, был ли передан аргумент с путем
if [ -z "$1" ]; then
    echo "Usage: $0 <path>"
    exit 1
fi

# Находим все файлы по заданному пути, считаем их MD5-хеши, сортируем и группируем дубликаты
data=$(find "$1" -type f -exec md5sum {} + | sort | uniq -w32 --all-repeated=separate)

# Проверяем, есть ли дубликаты
if [ -n "$data" ]; then
    echo "Найдены дубликаты файлов:"
    # Выводим только имена файлов без их MD5-хешей (начиная с 35 символа строки)
    echo "$data" | cut -c 35-
else
    echo "Дубликатов файлов не найдено!"
fi
